<template>
  <view class="mine-container">
    <!-- é¡¶éƒ¨çŠ¶æ€æ èƒŒæ™¯ -->
    <view class="bg-gradient">
      <view class="status-bar">
        <text class="time">{{ currentTime }}</text>
        <view class="status-icons">
          <text class="signal-icon">â—â—â—</text>
          <text class="wifi-icon">â˜°</text>
          <text class="battery-icon">â¬œ</text>
        </view>
      </view>
      
      <view class="header-controls">
        <view class="left-controls">
          <view class="icon-btn headphone">
            <text class="iconfont">ğŸ§</text>
          </view>
          <view class="icon-btn notification">
            <text class="iconfont">ğŸ””</text>
          </view>
        </view>
        <view class="right-controls">
          <view class="more-btn">
            <text class="dot">â—â—â—</text>
          </view>
          <view class="circle-btn">
            <text class="iconfont">âŠ•</text>
          </view>
        </view>
      </view>
      
      <!-- æ¨ªå¹…å¹¿å‘ŠåŒº -->
      <view class="banner-section">
        <view class="banner-content">
          <view class="banner-title">
            <text class="line1">ä¸€èµ·è¿åŠ¨</text>
            <text class="flash-x">Flash X</text>
          </view>
          <view class="banner-subtitle">
            <text>å°±æ¥é—ªåŠ¨</text>
          </view>
          <view class="banner-tags">
            <text class="tag flash-tag">Flash X</text>
            <text class="tag come-on-tag">Come On!</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
    <view class="user-card">
      <view class="user-info">
        <view class="avatar">
          <!-- ä½¿ç”¨èƒŒæ™¯è‰²ä»£æ›¿å›¾ç‰‡ -->
        </view>
        <view class="user-data">
          <view class="username">ç•™ç»™ä¸­å›½é˜Ÿçš„æ—¶é—´...</view>
          <view class="edit-btn">ç¼–è¾‘èµ„æ–™</view>
        </view>
      </view>
      <view class="user-stats">
        <text class="stats-count">è·èµ 0</text>
      </view>
      
      <!-- ç”¨æˆ·æ´»åŠ¨æ•°æ® -->
      <view class="activity-data">
        <view class="data-item">
          <view class="data-icon trophy">ğŸ†</view>
          <text class="data-label">æ´»åŠ¨</text>
          <text class="data-count">0<text class="unit">æ¬¡</text></text>
        </view>
        <view class="data-item">
          <view class="data-icon club">ğŸŸï¸</view>
          <text class="data-label">ä¿±ä¹éƒ¨</text>
          <text class="data-count">0<text class="unit">ä¸ª</text></text>
        </view>
        <view class="data-item">
          <view class="data-icon timer">â±ï¸</view>
          <text class="data-label">ç´¯è®¡æ—¶é•¿</text>
          <text class="data-count">0<text class="unit">h</text></text>
        </view>
      </view>
    </view>
    
    <!-- åŠŸèƒ½æ¨¡å—åŒº -->
    <view class="function-modules">
      <view class="module-item" v-for="(item, index) in modules" :key="index">
        <view class="module-icon" :class="item.iconClass">
          <text class="iconfont">{{ item.icon }}</text>
          <text class="badge" v-if="item.badge">{{ item.badge }}</text>
        </view>
        <text class="module-name">{{ item.name }}</text>
      </view>
    </view>
    
    <!-- æ¨å¹¿å…¥é©»åŒº -->
    <view class="promo-section">
      <view class="promo-item">
        <view class="promo-icon fire">ğŸ”¥</view>
        <view class="promo-content">
          <text class="promo-title">æˆ‘è¦æ¨å¹¿</text>
          <text class="promo-desc">æé«˜æ›å…‰</text>
        </view>
      </view>
      
      <view class="promo-item">
        <view class="promo-icon invite">âœ‰ï¸</view>
        <view class="promo-content">
          <text class="promo-title">é‚€è¯·å…¥é©»</text>
          <text class="promo-desc">ä¸€èµ·åŠ¨èµ·æ¥</text>
        </view>
      </view>
      
      <view class="promo-item">
        <view class="promo-icon venue">ğŸ¬</view>
        <view class="promo-content">
          <text class="promo-title">åœºé¦†å…¥é©»</text>
          <text class="promo-desc">ç”³è¯·å…¥é©»å¹³å°</text>
        </view>
      </view>
    </view>
    
    <!-- å¹¿å‘Šæ¨ªå¹… -->
    <view class="ad-banner">
      <view class="ad-content">
        <view class="ad-icon">ğŸ“„</view>
        <view class="ad-text">
          <text class="ad-title">2025æ‹›è¡ŒåŒ—äº¬å·¥</text>
          <text class="ad-subtitle">ä½“è‚²é”»ç‚¼é¡¹ç›®</text>
        </view>
      </view>
      <view class="ad-button">ç«‹å³ä½¿ç”¨</view>
    </view>
    
    <!-- åº•éƒ¨å¯¼èˆª -->
    <view class="tab-bar">
      <view class="tab-item active">
        <text class="tab-icon">âš¡</text>
        <text class="tab-name">é—ªåŠ¨</text>
      </view>
      <view class="tab-item">
        <text class="tab-icon">ğŸ </text>
        <text class="tab-name">æ‰¾åœºé¦†</text>
      </view>
      <view class="tab-item add-btn">
        <text class="add-icon">+</text>
      </view>
      <view class="tab-item">
        <text class="tab-icon">ğŸ†</text>
        <text class="tab-name">ä¿±ä¹éƒ¨</text>
      </view>
      <view class="tab-item current">
        <text class="tab-icon">ğŸ‘¤</text>
        <text class="tab-name">æˆ‘çš„</text>
      </view>
    </view>
  </view>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue';

// å½“å‰æ—¶é—´
const currentTime = ref('22:08');

// æ›´æ–°æ—¶é—´å‡½æ•°
const updateTime = () => {
  const now = new Date();
  const hours = now.getHours().toString().padStart(2, '0');
  const minutes = now.getMinutes().toString().padStart(2, '0');
  currentTime.value = `${hours}:${minutes}`;
};

// åŠŸèƒ½æ¨¡å—æ•°æ®
const modules = ref([
  { icon: 'ğŸ“‹', name: 'æˆ‘çš„è®¢å•', iconClass: 'order' },
  { icon: 'ğŸ’°', name: 'æˆ‘çš„é’±åŒ…', iconClass: 'wallet' },
  { icon: 'ğŸŸï¸', name: 'æˆ‘çš„å¡åˆ¸', iconClass: 'coupon', badge: 'NEW' },
  { icon: 'ğŸ”§', name: 'å·¥å…·ç®±', iconClass: 'tools' },
  { icon: 'ğŸ”', name: 'æ´»åŠ¨', iconClass: 'activity' }
]);

// å®šæ—¶å™¨
let timer: number | null = null;

onMounted(() => {
  updateTime(); // åˆå§‹æ›´æ–°
  // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡æ—¶é—´
  timer = setInterval(updateTime, 60000) as unknown as number;
});

onUnmounted(() => {
  if (timer) {
    clearInterval(timer);
  }
});
</script>

<style scoped>
.mine-container {
  position: relative;
  height: 100vh;
  background-color: #f5f5f5;
}

/* æ¸å˜èƒŒæ™¯ */
.bg-gradient {
  background: linear-gradient(120deg, #fa9efc 0%, #a6c1ee 100%);
  padding-bottom: 150px;
  position: relative;
}

/* çŠ¶æ€æ  */
.status-bar {
  display: flex;
  justify-content: space-between;
  padding: 10px 20px;
  color: white;
}

.status-icons {
  display: flex;
  gap: 8px;
}

/* å¤´éƒ¨æ§åˆ¶åŒº */
.header-controls {
  display: flex;
  justify-content: space-between;
  padding: 10px 20px;
}

.left-controls, .right-controls {
  display: flex;
  gap: 20px;
}

.icon-btn {
  width: 40px;
  height: 40px;
  background-color: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.more-btn {
  display: flex;
  align-items: center;
  background-color: rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  padding: 0 20px;
  height: 40px;
}

.circle-btn {
  width: 40px;
  height: 40px;
  background-color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #555;
}

/* æ¨ªå¹…å¹¿å‘ŠåŒº */
.banner-section {
  position: relative;
  height: 220px;
  margin-top: 20px;
  background: linear-gradient(135deg, #00c6ff, #0072ff);
  border-radius: 15px;
  margin: 20px;
  overflow: hidden;
}

.banner-content {
  position: absolute;
  top: 0;
  left: 0;
  padding: 20px;
  color: white;
}

.banner-title {
  font-size: 28px;
  font-weight: bold;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.line1 {
  font-size: 32px;
}

.flash-x {
  font-size: 26px;
  color: #00ffcc;
}

.banner-subtitle {
  font-size: 32px;
  font-weight: bold;
  margin-bottom: 20px;
}

.banner-tags {
  display: flex;
  gap: 10px;
  margin-top: 30px;
}

.tag {
  padding: 5px 15px;
  border-radius: 20px;
  font-size: 14px;
}

.flash-tag {
  background-color: #ff66cc;
  color: white;
}

.come-on-tag {
  background-color: white;
  color: #333;
}

/* ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ */
.user-card {
  position: relative;
  margin: -100px 20px 20px;
  background-color: white;
  border-radius: 15px;
  padding: 20px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
}

.user-info {
  display: flex;
  align-items: center;
  gap: 15px;
}

.avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  border: 3px solid #f0f0f0;
  background: linear-gradient(45deg, #6e8efb, #a777e3);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 36px;
  font-weight: bold;
}

.username {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 8px;
}

.edit-btn {
  display: inline-block;
  font-size: 14px;
  color: #999;
  border: 1px solid #ddd;
  border-radius: 15px;
  padding: 2px 10px;
}

.user-stats {
  margin-top: 10px;
  margin-left: 95px;
  font-size: 14px;
  color: #999;
}

/* æ´»åŠ¨æ•°æ® */
.activity-data {
  display: flex;
  margin-top: 20px;
  border-top: 1px solid #f5f5f5;
  padding-top: 15px;
}

.data-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.data-icon {
  margin-bottom: 5px;
  font-size: 24px;
}

.data-label {
  font-size: 14px;
  color: #999;
  margin-bottom: 5px;
}

.data-count {
  font-size: 24px;
  font-weight: bold;
  color: #333;
}

.unit {
  font-size: 14px;
  font-weight: normal;
  color: #999;
}

/* åŠŸèƒ½æ¨¡å—åŒº */
.function-modules {
  display: flex;
  background-color: white;
  margin: 0 20px 20px;
  border-radius: 15px;
  padding: 20px 10px;
  justify-content: space-between;
}

.module-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.module-icon {
  position: relative;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 8px;
  font-size: 24px;
}

.badge {
  position: absolute;
  top: -5px;
  right: -5px;
  background-color: #ff3b30;
  color: white;
  font-size: 10px;
  padding: 2px 5px;
  border-radius: 10px;
}

.module-name {
  font-size: 14px;
  color: #333;
}

/* å›¾æ ‡é¢œè‰² */
.coupon .iconfont {
  color: #2196f3;
}

.wallet .iconfont {
  color: #00bcd4;
}

.order .iconfont {
  color: #4caf50;
}

.tools .iconfont {
  color: #ff9800;
}

.activity .iconfont {
  color: #9c27b0;
}

/* æ¨å¹¿å…¥é©»åŒº */
.promo-section {
  display: flex;
  gap: 15px;
  margin: 0 20px 20px;
}

.promo-item {
  flex: 1;
  background-color: white;
  border-radius: 15px;
  padding: 15px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.promo-icon {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
}

.fire {
  background-color: #ffecee;
  color: #ff4d6a;
}

.invite {
  background-color: #e8f5fe;
  color: #0099ff;
}

.venue {
  background-color: #f1e7fc;
  color: #9966ff;
}

.promo-content {
  display: flex;
  flex-direction: column;
  flex: 1;
}

.promo-title {
  font-size: 14px;
  font-weight: bold;
  margin-bottom: 3px;
}

.promo-desc {
  font-size: 12px;
  color: #999;
}

/* å¹¿å‘Šæ¨ªå¹… */
.ad-banner {
  margin: 0 20px 20px;
  background: linear-gradient(90deg, #ff6b6b, #ff9d66);
  border-radius: 15px;
  padding: 15px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: white;
}

.ad-content {
  display: flex;
  align-items: center;
  gap: 10px;
}

.ad-icon {
  font-size: 24px;
}

.ad-text {
  display: flex;
  flex-direction: column;
}

.ad-title {
  font-size: 16px;
  font-weight: bold;
}

.ad-subtitle {
  font-size: 14px;
}

.ad-button {
  background-color: #ffdd59;
  color: #333;
  padding: 8px 15px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: bold;
}

/* åº•éƒ¨å¯¼èˆª */
.tab-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 60px;
  background-color: white;
  display: flex;
  align-items: center;
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
}

.tab-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #999;
}

.tab-icon {
  font-size: 20px;
  margin-bottom: 3px;
}

.tab-name {
  font-size: 12px;
}

.add-btn {
  height: 50px;
  width: 50px;
  background-color: #00deff;
  border-radius: 50%;
  margin-top: -20px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 10px rgba(0, 221, 255, 0.3);
}

.add-icon {
  font-size: 30px;
  color: white;
}

.active {
  color: #00deff;
}

.current {
  color: #333;
}
</style> 